---
title: iOSé€šç”¨é“¾æ¥
date: 2017-07-26 13:44:37
tags:
---
![](http://upload-images.jianshu.io/upload_images/6067780-bfbf1d20b36064e7.gif?imageMogr2/auto-orient/strip)

[å®˜æ–¹æ–‡æ¡£ ](https://developer.apple.com/library/content/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1)

> Q1ï¼šæˆ‘çš„åº”ç”¨ä¸ºä½•è¦ä½¿ç”¨é€šç”¨é“¾æ¥ï¼Ÿ

æˆ‘ä»¬çš„åº”ç”¨æœ‰å¾ˆå¤šåˆ†äº«åˆ°å¾®ä¿¡ã€QQç­‰ç¬¬ä¸‰æ–¹å¹³å°çš„å†…å®¹ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†è®©ç”¨æˆ·åœ¨åˆ†äº«åˆ°å¾®ä¿¡çš„ç½‘é¡µé‡Œé¢ç‚¹å‡»æŸä¸ªé“¾æ¥æˆ–è€…æ‰“å¼€æŒ‰é’®ç›´æ¥è½¬åˆ°æˆ‘ä»¬çš„appï¼Œç›¯ä¸Šäº†è¿™ä¸ªiOS 9ä¹‹åæ‰æœ‰çš„ç³»ç»Ÿçº§çš„åŠŸèƒ½ï¼Œä»–å°±æ˜¯ Universal Linksã€‚è™½ç„¶è¯´é€šç”¨é“¾æ¥å¹¶ä¸æ˜¯ä¸“é—¨ä¸ºè¿™ç§è®¾è®¡çš„ï¼Œä½†æ˜¯è¦å®ç°æˆ‘ä¸Šé¢è¯´çš„ å¾®ä¿¡è·³è½¬åˆ°ä½ çš„app ï¼Œå®ƒè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚

> Q2ï¼šä¸ºä½•ä¸ç”¨schemeï¼Ÿ

schemeçš„æ–¹å¼æ˜¯ä¸å…è®¸ä»å¾®ä¿¡æˆ–è€…å…¶ä»–appè·³è½¬åˆ°ä½ çš„appçš„ï¼Œé™¤éå¾®ä¿¡æˆ–è€…å…¶ä»–appçš„ç™½åå•é‡Œé¢æœ‰ä½ çš„appçš„schemeï¼Œè¿™å¥½åƒä¹Ÿä¸æ˜¯å¥½å¤šæ–‡ç« é‡Œé¢è¯´çš„å¾®ä¿¡ç¦ç”¨äº†schemeï¼Œå¾®ä¿¡éƒ½ä¸çŸ¥é“ä½ çš„schemeæ€ä¹ˆç»™ä½ è·³è½¬åˆ°ä½ çš„åº”ç”¨å‘¢ ã€‚ï¼ˆä¸ªäººç†è§£ï¼‰

æˆ‘æŠŠå®ƒåˆ†æˆä¸‰éƒ¨åˆ†å§ï¼ˆDeveloper Settingsï¼‰
1. [**Developer Settings** ï¼ˆå¼€å‘è€…ä¸­å¿ƒé…ç½®ï¼‰](#1. Developer Settings)
2. [**HTTPS Settings**ï¼ˆæœåŠ¡å™¨é…ç½®ï¼‰](#2. HTTPS Settings)
3. [**Xcode Settings**ï¼ˆXcodeé…ç½®ï¼‰](#3. Xcode Settings)

<!-- more -->
<span id="1. Developer Settings"></span>
## Developer Settings
é¦–å…ˆï¼Œéœ€è¦åœ¨å¼€å‘è€…ä¸­å¿ƒå¼€å¯Associated DomainsåŠŸèƒ½ï¼Œå…·ä½“æ“ä½œæ˜¯ï¼š

åœ¨ **App IDs** é€‰æ‹©ä½ è¦ä¿®æ”¹çš„ **App ID** ï¼›
![](http://upload-images.jianshu.io/upload_images/6067780-a187a924f6edd604.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ç‚¹å‡»è¦ä¿®æ”¹çš„ **App ID**ï¼Œåœ¨åˆ—è¡¨ä¸­å‹¾é€‰ **Associated Domains** ï¼›
![](http://upload-images.jianshu.io/upload_images/6067780-e5aab7f027006d2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
åœ¨å¼¹å‡ºæ¡†ç‚¹ç¡®å®šï¼Œè¿™ä¸ªè­¦å‘Šæ˜¯å‘Šè¯‰ä½ ï¼Œä½ å¦‚æœå¯ç”¨è¯¥åŠŸèƒ½ï¼Œå°±ç›¸å½“äºç¼–è¾‘äº†è¿™ä¸ª **App ID**ï¼Œé‚£ä¹ˆä½ ç°æœ‰çš„ç”¨è¯¥ **App ID** ç”Ÿæˆçš„æè¿°æ–‡ä»¶å°±å¾—é‡æ–°ç”Ÿæˆå¹¶å¯¼å…¥è‡³ **Xcode** ä¸­äº†ï¼›
![](http://upload-images.jianshu.io/upload_images/6067780-aeda0e60f1172991.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ç‚¹å‡»ç¡®å®šåï¼Œä½ ä¼šå‘ç° **Associated Domains** å¯ç”¨äº†ï¼›
![](http://upload-images.jianshu.io/upload_images/6067780-16b4c4c8a3a0dce4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ç‚¹å‡»æè¿°æ–‡ä»¶ï¼Œå‘ç°å¤±æ•ˆäº†ï¼Œé‚£æ˜¯å› ä¸ºä½ ç¼–è¾‘è¿‡ç”Ÿæˆè¯¥æè¿°æ–‡ä»¶ç”¨åˆ°çš„ **App ID**ï¼Œä¸æ€¥ï¼Œç¼–è¾‘å®ƒå°±æ˜¯äº†ï¼›
![](http://upload-images.jianshu.io/upload_images/6067780-5f5701fbc4343255.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ç¼–è¾‘æè¿°æ–‡ä»¶ï¼Œåªéœ€è¦é‡æ–°å‹¾é€‰ **App ID** å³å¯ï¼Œç„¶åä¿å­˜çš„æè¿°æ–‡ä»¶åˆå˜æˆæœ‰æ•ˆçš„äº†ã€‚ä¸‹å›¾æ³¨é‡Šä¸­è¯´çš„å¾ˆæ˜ç¡®äº†ï¼Œ**Download** è¯¥æè¿°æ–‡ä»¶ï¼ŒåŒå‡»å®‰è£…å³å¯ã€‚
![](http://upload-images.jianshu.io/upload_images/6067780-57223885809e51b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
å¼€å‘è·Ÿå‘å¸ƒçš„æè¿°æ–‡ä»¶éƒ½é‡æ–°ç”Ÿæˆå¹¶ä¸‹è½½å®‰è£…ä¹‹åï¼Œå¼€å‘è€…ä¸­å¿ƒçš„é…ç½®å°±å®Œæˆäº†ã€‚

<span id="2. HTTPS Settings"></span>
## HTTPS Settings
### æœ‰ä¸€ä¸ªæ³¨å†Œçš„é€šè¿‡ **SSL** è®¿é—®çš„åŸŸåï¼ˆ**HTTPS**ï¼‰
å‡è®¾ä½ çš„åŸŸåä¸º **domain** ï¼Œä¾‹å¦‚ï¼š*www.xxx.com* æˆ– *xxx.com* æˆ– *xxx.xxx.com* éƒ½èƒ½å½“åšæ˜¯åŸŸåï¼Œå…·ä½“çœ‹ä½ åå°æ€ä¹ˆç»™ä½ é…ï¼Œæˆ‘è¿™é‡Œç§°ä¹‹ä¸º **domain**ï¼Œ**domain** ä»£è¡¨ä¸Šè¿°é‚£å‡ ç§åŸŸåã€‚


### æ”¯æŒä¸Šä¼ ä¸€ä¸ª **JSON** æ–‡ä»¶åˆ°ä½ çš„åŸŸå
ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å†™ä¸€ä¸ª **JSON** ï¼Œè¯¥ **JSON** çš„æ ¼å¼æ˜¯ï¼š
```
{
    "applinks": {
        "apps": [],
        "details": [
            {
                "appID": "TeamID.BundleIdentifier",
                "paths": [ "*" ]
            }
        ]
    }
}
```
è¿™ä¸ª **JSON** æœ€å¥½å» [å®˜æ–¹æ–‡æ¡£](https://developer.apple.com/library/content/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1) å»å¤åˆ¶ï¼Œæˆ‘ä¹‹å‰å¤åˆ¶äº†ä¸€ç‰‡åšå®¢ä¸Šçš„ï¼Œå°±æ˜¯é”™çš„ã€‚
 ä¸Šé¢çš„ **appID** çš„ç»„æˆç»“æ„æ˜¯ **TeamID.BundleIdentifier**
1. **TeamID** å¯ä»¥å»å¼€å‘è€…ä¸­å¿ƒçš„ **Account -> Membership** ä¸‹å»æ‰¾ã€‚å¦‚å›¾ï¼š
![](http://upload-images.jianshu.io/upload_images/6067780-eed9c6467802ecfc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
2. **BundleIdentifier** å°±æ˜¯ä½ åº”ç”¨çš„ **Bundle Identifier**ï¼Œå¦‚å›¾ï¼š
![](http://upload-images.jianshu.io/upload_images/6067780-ab9401bb05fc5711.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
è¿™ä¸ª **JSON** å…¶ä»– **key** çš„ä½œç”¨æˆ‘å°±ä¸è¿‡å¤šèµ˜è¿°äº†ï¼Œå…·ä½“çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œ** paths** æˆ‘è¿™é‡Œæ˜¯ç”¨äº† **\***ï¼Œä»£è¡¨æ”¯æŒè¯¥åŸŸåä¸‹çš„æ‰€æœ‰é“¾æ¥è·³è½¬è‡³ **App**ã€‚
3. ç¼–è¾‘å¥½è¯¥ **JSON** åï¼Œä¿å­˜ï¼Œå‘½åä¸ºï¼š`apple-app-site-association`ï¼Œæ³¨æ„ï¼Œè¿™é‡Œä¸èƒ½ç»™è¯¥æ–‡ä»¶å† ä»¥ `.json`ä¹‹ç±»çš„åç¼€ã€‚å¦‚å›¾ï¼š
![](http://upload-images.jianshu.io/upload_images/6067780-08ed38284d1f1fbc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
4. å°†ä¿å­˜å¥½çš„ **JSON** æ–‡ä»¶ `apple-app-site-association`ä¸Šä¼ è‡³HTTPSæœåŠ¡å™¨åŸŸåçš„ **æ ¹ç›®å½•** æˆ–è€…æ ¹ç›®å½•ä¸‹çš„`.well-known`æ–‡ä»¶å¤¹ä¸‹ã€‚ä¾‹å¦‚ï¼šhttps://domain/apple-app-site-association æˆ–è€… https://domain/.well-known/apple-app-site-associationï¼Œ å…¶ä¸­ **domain** å°±æ˜¯ä½ çš„åŸŸåï¼Œä¸Šé¢å·²ç»æ¦‚è¿°è¿‡ã€‚


### èƒ½é€šè¿‡ **GET** è¯·æ±‚è®¿é—®è¯¥åŸŸåä¸‹çš„ **JSON**
ä¸Šä¼ å¥½ **JSON** æ–‡ä»¶åï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯é€šè¿‡æµè§ˆå™¨è®¿é—®è¯¥æ–‡ä»¶ï¼Œå¦‚æœèƒ½å¾—åˆ°è¯¥ **JSON** å†…å®¹ï¼Œè¯´æ˜å·²ç»å¯ä»¥è®¿é—®è¯¥æ–‡ä»¶ã€‚å¦‚å›¾ï¼š
![æˆ‘è¿™æµè§ˆå™¨è£…äº†jsonæ’ä»¶ï¼Œæ²¡è£…çš„æ•ˆæœå¯èƒ½ä¸æ˜¯ä¸Šå›¾æ‰€ç¤ºã€‚](http://upload-images.jianshu.io/upload_images/6067780-744b731c22db8998.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æœ‰çš„åšå®¢å†™å¯ä»¥å»è‹¹æœçš„ä¸€ä¸ª [æ£€æµ‹ç½‘ç«™](https://search.developer.apple.com/appsearch-validation-tool/) æ£€æµ‹æ˜¯å¦å¯ç”¨ï¼Œæˆ‘åæ­£æ˜¯æ¯æ¬¡éƒ½å¤±è´¥äº†ï¼Œçº ç»“äº†æˆ‘å¥½ä¹…ã€‚å…¶å®ï¼Œç”¨æµè§ˆå™¨èƒ½è®¿é—®åˆ°è¯¥jsonè¯´æ˜ä¹Ÿæ˜¯æˆåŠŸäº†ï¼Œåˆ«çº ç»“ã€‚
è‡³æ­¤ï¼Œwebçš„é…ç½®å°±å®Œæˆäº†ã€‚

    
<span id="3. Xcode Settings"></span>
## Xcode Settings
### å·¥ç¨‹é…ç½®

**Targets -> Capabilities -> Associated Domains**
![](http://upload-images.jianshu.io/upload_images/6067780-200605e98ee85929.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
è¿™é‡Œçš„æ“ä½œå°±æ˜¯æ·»åŠ  **Domains**ï¼Œå…·ä½“å†™ **applinks:domain**ï¼Œè¿™é‡Œçš„ **domain** è·Ÿä¸Šä¸€æ­¥ **Web Settings** é‡Œé¢çš„ **domain** æ˜¯ä¸€è‡´çš„ã€‚
`å‡è®¾ä½ çš„åŸŸåä¸º domain ï¼Œä¾‹å¦‚ï¼šwww.xxx.com æˆ– xxx.com æˆ– xxx.xxx.com éƒ½èƒ½å½“åšæ˜¯åŸŸåï¼Œå…·ä½“çœ‹ä½ åå°æ€ä¹ˆç»™ä½ é…ï¼Œæˆ‘è¿™é‡Œç§°ä¹‹ä¸º domainï¼Œdomain ä»£è¡¨ä¸Šè¿°é‚£å‡ ç§åŸŸåã€‚`
è¿™é‡Œå¼€å¯äº† **Associated Domains**  åŠŸèƒ½åï¼Œä½ çš„å·¥ç¨‹ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª **.entitlements** æ–‡ä»¶ï¼Œå¦‚å›¾ï¼š
![](http://upload-images.jianshu.io/upload_images/6067780-2b8eb327d95c3ce8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œä½ çš„é€šç”¨é“¾æ¥åŸºæœ¬æ‰“é€šäº†ã€‚ä½ å¯ä»¥é€šè¿‡ç®€å•çš„æ–¹æ³•æ¥æµ‹è¯•ä¸€ä¸‹ã€‚
æˆ‘çš„æµ‹è¯•æ–¹æ³•æ˜¯ï¼š
 1. åˆ é™¤å·²å®‰è£…çš„appï¼Œé‡æ–°å®‰è£…ï¼›
 2. å¾…ç¨‹åºå®‰è£…å¥½åï¼Œæ‰“å¼€å¤‡å¿˜å½•ï¼Œåœ¨å¤‡å¿˜å½•é‡Œé¢éšä¾¿è¾“å…¥ä¸€ä¸ªå¸¦åŸŸåçš„é“¾æ¥ï¼Œæ¯”å¦‚ï¼šhttps://domain/xxxï¼Œ ç‚¹å‡»å³ä¸Šè§’å®ŒæˆæŒ‰é’®ï¼›
 3. é•¿æŒ‰è¯¥é“¾æ¥ï¼Œå¦‚æœå·²æ¥é€šé€šç”¨é“¾æ¥ï¼Œåº•éƒ¨å¼¹å‡ºæ¡†ä¼šå¤šå‡ºä¸€æ ï¼Œæ˜¾ç¤ºâ€œåœ¨xxxä¸­æ‰“å¼€â€ï¼Œå…¶ä¸­è¿™ä¸ªxxxå°±æ˜¯ä½ åº”ç”¨çš„åå­—ã€‚å¦‚å›¾ï¼š
![](http://upload-images.jianshu.io/upload_images/6067780-c7569ec3df79fbd7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
è¯´æ˜ï¼Œå·²ç»æ¥é€šäº†ã€‚
### AppDelegate.m æ¥æ”¶å¹¶å¤„ç†å›è°ƒ
é€šè¿‡æµè§ˆå™¨æˆ–è€…åˆ«çš„appé‡Œé¢çš„ç½‘é¡µå†…ç‚¹å‡»ä½ çš„é€šç”¨é“¾æ¥è·³è½¬è‡³ä½ çš„appä¹‹åï¼Œä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼š
-application:continueUserActivity:restorationHandler:
ä»¥ä¸‹æ˜¯æˆ‘çš„ä»£ç ï¼š
```
 - (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:(void (^)(NSArray * _Nullable))restorationHandler {
    if ([userActivity.activityType isEqualToString:NSUserActivityTypeBrowsingWeb]) {
        NSURL *webUrl = userActivity.webpageURL;
        NSLog(@"host = %@", webUrl.host);
        NSString *urlString = webUrl.absoluteString;
        NSArray *arr = [urlString componentsSeparatedByString:@"xxx"];
        if (arr.count == 2) {
            if ([[arr lastObject] length] > 0) {
                NSString *paraString = [arr lastObject];
                NSString *schemeStr = @"xxxxxxx";
                if ([paraString hasPrefix:schemeStr]) {
                    NSLog(@"æ¥æ”¶åˆ°äº†");
                    NSLog(@"root = %@", self.window.rootViewController);
                    id rootVC = self.window.rootViewController;
                    if ([rootVC isKindOfClass:[LoginNVC class]]) {
                        NSLog(@"æœªç™»å½•ï¼Œè¯·å…ˆç™»å½•");
                    } else {
                        NSLog(@"å·²ç™»å½•ç›´æ¥è·³è½¬è‡³æŒ‡å®šé¡µé¢");
                        [self gotoDiffrentVCWithUrl:[NSURL URLWithString:paraString]];
                    }
                }
            }
        }
        return YES;
    } else {
        return NO;
    }
}
```
ä»£ç å†™çš„æ¯”è¾ƒä»“ä¿ƒï¼Œä¸ç”¨çº ç»“ï¼Œé‡Œé¢çš„å…³é”®keyæˆ‘ä¹Ÿç”¨xxxæ¥ä»£æ›¿äº†ï¼Œä¸»è¦çœ‹ä½ åå°çš„é€šç”¨é“¾æ¥çš„å‚æ•°å•Šä»€ä¹ˆçš„æœ‰æ²¡æœ‰æŒ‡å®šè§„åˆ™å§ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œéƒ½æ˜¯éµå¾ªåˆ¶å®šå¥½çš„è§„åˆ™æ¥è·³æŒ‡å®šé¡µé¢çš„ã€‚

## æœ€é‡è¦çš„å‡ ç‚¹ï¼ˆå‘ğŸ˜¤ï¼‰
### domain ä¸èƒ½è·Ÿä½ çš„ç½‘é¡µçš„  host  ç›¸åŒ
æˆ‘é…ç½®å¥½äº†ä¹‹åï¼Œå°±æ¥åœ¨åå°å†™äº†ä¸€ä¸ªç½‘é¡µï¼Œç½‘é¡µçš„ **host** ç”¨çš„æ˜¯ **domain**ï¼Œç½‘é¡µé‡Œé¢åŠ äº†å‡ ä¸ªè¶…é“¾æ¥ï¼Œè¶…é“¾æ¥çš„åœ°å€çš„ **host** ç”¨çš„æ˜¯ **domain**ï¼Œç„¶ååˆ†äº«åˆ°å¾®ä¿¡ï¼Œåœ¨å¾®ä¿¡æ‰“å¼€çš„ç½‘é¡µé‡Œé¢ç‚¹å‡»æˆ‘å†™å¥½çš„å‡ ä¸ªè¶…é“¾æ¥ï¼Œå‘ç°ï¼Œå¤©å“ªï¼Œå±…ç„¶ç›´æ¥åœ¨å¾®ä¿¡çš„ç½‘é¡µå†…ç»§ç»­æ‰“å¼€äº†ï¼Œå¹¶æ²¡æœ‰è·³è½¬åˆ°æˆ‘çš„ **app**ã€‚ç”¨ **Safari ** æ‰“å¼€ï¼Œå±…ç„¶ä¹Ÿæ˜¯åœ¨ **Safari ** ä¸­ç»§ç»­æ‰“å¼€ç½‘é¡µäº†ï¼Œæ²¡æœ‰è·³è½¬è‡³æˆ‘çš„ **app**ã€‚å´©æºƒäº†ğŸ˜–â€¦â€¦ç„¶åçº ç»“äº†å¥½ä¹…ï¼Œæ˜¯æˆ‘å“ªé‡Œæ²¡é…ç½®å¥½å—ï¼Œæ˜¯ä¸æ˜¯æ–‡ä»¶çš„ **JSON**æœ‰é—®é¢˜ï¼Ÿæ˜¯ä¸æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼š**domain ä¸èƒ½è·Ÿä½ çš„ç½‘é¡µçš„ host ç›¸åŒ**ã€‚
>æ¯”å¦‚ï¼šå¾®ä¿¡æ‰“å¼€ä½ çš„ç½‘é¡µï¼Œç½‘é¡µå†…æœ‰ä¸ªâ€œæ‰“å¼€appâ€æŒ‰é’®ï¼Œä½ ç‚¹å‡»â€œæ‰“å¼€appâ€æŒ‰é’®ï¼ŒæœŸæœ›æ˜¯è·³åˆ°ä½ çš„appã€‚
æ¯‹åº¸ç½®ç–‘ï¼Œâ€œæ‰“å¼€appâ€è¿™ä¸ªæ“ä½œæœ€ç»ˆè§¦å‘çš„é“¾æ¥æ˜¯ä½ ä¸Šé¢é…ç½®å¥½çš„ **domain** çš„åœ°å€ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œä½ è¿™ä¸ªç½‘é¡µçš„åœ°å€å°±ä¸åº”è¯¥æ˜¯å¸¦æœ‰ **domain** çš„åœ°å€äº†ã€‚å¦‚æœä½ ç½‘é¡µæ˜¯åœ¨ **domain** ä¸‹ï¼Œè€Œä¸”ä½ çš„â€œæ‰“å¼€appâ€çš„åœ°å€ä¹Ÿåœ¨ **domain** ä¸‹ï¼Œé‚£ä¹ˆå°±ä¸ä¼šè·³è½¬åˆ°ä½ çš„ **app**ã€‚æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä¸ºä»€ä¹ˆï¼Œç†è§£çš„æµ…ï¼Œä½†å®é™…ä¸Šè¿™æ ·å°±æ˜¯ä¸è¡Œã€‚ä¾‹å­ï¼š
ç½‘é¡µåœ°å€ï¼šhttp://host/xxx
â€œæ‰“å¼€appâ€åœ°å€ï¼šhttps://domain/xxx?xxx=xxx
è¿™é‡Œçš„hostå¦‚æœç­‰äºdomainï¼Œå°±æ˜¯æˆ‘ä¸Šé¢è¯´çš„é‚£ç§æƒ…å†µï¼Œç›´æ¥åœ¨ç½‘é¡µå†…æ‰“å¼€äº†ã€‚å¦‚æœhostä¸ç­‰äºdomainï¼Œå®Œç¾è·³è½¬è‡³ä½ çš„appã€‚
å½“ç„¶ï¼Œâ€œæ‰“å¼€appâ€è¿™ä¸ªæ“ä½œå®é™…ä¸Šå¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚å®é™…ä¸Šè¿˜è¦å¤šé‡åˆ¤æ–­ã€‚å¦‚æœä½ å¹¶æœªå®‰è£…è¯¥appï¼Œé‚£ä¹ˆè·³è½¬åˆ°ä¸‹è½½é¡µé¢ã€‚å¦‚æœä½ å®‰è£…äº†è¯¥appï¼Œç›´æ¥åœ¨è§¦å‘è¿™ä¸ªdomainé“¾æ¥çš„æ—¶å€™å°±è·³åˆ°ä½ çš„appäº†ã€‚

### iOS  ä¼šè®°å½•ä½ çš„ç”¨æˆ·ä¹ æƒ¯
iOS 10ä¸‹ç”¨é€šç”¨é“¾æ¥è·³è½¬è‡³ä½ çš„appçš„æ—¶å€™ï¼Œå‡è®¾è¿™é‡Œæ˜¯å¾®ä¿¡ç½‘é¡µé‡Œé¢ç‚¹å‡»äº†â€œæ‰“å¼€appâ€è·³è½¬è‡³ä½ çš„åº”ç”¨ï¼Œé‚£ä¹ˆè·³åˆ°ä½ çš„åº”ç”¨çš„æ—¶å€™ï¼Œä½ çš„åº”ç”¨é¡¶éƒ¨çš„statusbarå·¦ä¸Šè§’ä¼šå‡ºç°â€œè¿”å›è‡³å¾®ä¿¡â€æŒ‰é’®ï¼Œå³ä¸Šè§’ä¼šå‡ºç°â€œç”¨Safariæ‰“å¼€xxxâ€ã€‚å¦‚ä¸‹å›¾ï¼š
![](http://upload-images.jianshu.io/upload_images/6067780-5daaab263bef97dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
å½“ä½ ç‚¹å‡»äº†å³ä¸Šè§’çš„è¿™ä¸ªæŒ‰é’®çš„æ—¶å€™ï¼Œä¼šè·³è½¬è‡³Safariæ‰“å¼€ä½ çš„é€šç”¨é“¾æ¥ï¼ŒiOSç³»ç»Ÿä¼šè®°å½•ä½ è¿™ä¸ªæ“ä½œï¼Œè®¤ä¸ºä½ æƒ³åœ¨ç½‘é¡µå†…æ‰“å¼€ä½ çš„domainä¸‹çš„é€šç”¨é“¾æ¥ï¼Œä¼šå¯¼è‡´ä½ ä¹‹åç‚¹å‡»ä½ çš„é€šç”¨é“¾æ¥çš„æ—¶å€™ï¼Œç›´æ¥åœ¨Safariä¸­æ‰“å¼€äº†ï¼Œè€Œä¸æ˜¯è·³åˆ°ä½ çš„appã€‚
çƒ¦ï¼
æˆ‘æµ‹è¯•äº†ä¸€ä¸‹å‡¤å‡°æ–°é—»å’Œç½‘æ˜“æ–°é—»ï¼Œä»å¾®ä¿¡è·³è½¬è‡³ä»–ä»¬çš„appä¹‹åï¼Œå‘ç°å‡¤å‡°æ–°é—»çš„å³ä¸Šè§’çš„é‚£ä¸ªopenInSafariå¯ä»¥ç‚¹å‡»å¹¶ç”¨Safariæ‰“å¼€åˆ°æŒ‡å®šé¡µé¢ï¼Œå†æ¬¡åœ¨å¾®ä¿¡å†…ç‚¹å‡»å‡¤å‡°æ–°é—»çš„æ‰“å¼€appæŒ‰é’®æ—¶ï¼Œå°±ç›´æ¥åœ¨å¾®ä¿¡ç½‘é¡µå†…æ‰“å¼€äº†ï¼Œè€Œä¸æ˜¯è·³è½¬åˆ°ä½ çš„appã€‚ç½‘æ˜“æ–°é—»å°±æ€ªå¼‚äº†ï¼Œç‚¹å‡»å¾®ä¿¡å†…ç½‘æ˜“æ–°é—»çš„æ‰“å¼€appæŒ‰é’®è·³è½¬åˆ°ç½‘æ˜“æ–°é—»appæ—¶ï¼Œå³ä¸Šè§’çš„openInSafariæ˜¯ä¸å¯ç‚¹çš„ï¼å¥½å¥‡æ€ªã€‚
é‚£ä¹ˆä¸Šé¢è¯´çš„å‡¤å‡°æ–°é—»ä¸€æ—¦ç‚¹å‡»äº†å³ä¸Šè§’ä¹‹åï¼Œåç»­åœ¨å¾®ä¿¡çš„å‡¤å‡°æ–°é—»ç½‘é¡µå†…æ‰“å¼€appæ€ä¹ˆå†å»è·³è½¬è‡³å‡¤å‡°æ–°é—»appå‘¢ï¼Ÿå¦‚å›¾ï¼š
![å¾®ä¿¡å†…ç‚¹å‡»æ‰“å¼€app](http://upload-images.jianshu.io/upload_images/6067780-4de512d9ad573fcf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![Safariä¸­æ‰“å¼€](http://upload-images.jianshu.io/upload_images/6067780-211d769bd04de8b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![ä¸‹æ‹‰ç‚¹å‡»æ‰“å¼€](http://upload-images.jianshu.io/upload_images/6067780-a10591357e4550f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ä¾ç…§å‡¤å‡°æ–°é—»ç½‘é¡µçš„æç¤ºä¸€æ­¥æ­¥æ“ä½œï¼Œåˆ°æœ€åç‚¹å‡»Safariä¸­å³ä¸Šè§’çš„æ‰“å¼€æŒ‰é’®æ—¶ï¼Œé‚£ä¹ˆiOSç³»ç»Ÿåˆ™å†æ¬¡è®¤ä¸ºç”¨æˆ·ç‚¹å‡»å‡¤å‡°æ–°é—»çš„é€šç”¨é“¾æ¥æ—¶æ˜¯æƒ³æ‰“å¼€å‡¤å‡°æ–°é—»çš„appè€Œä¸æ˜¯åœ¨ç½‘é¡µå†…æµè§ˆã€‚é‚£ä¹ˆåç»­çš„åˆ†äº«è‡³å¾®ä¿¡çš„å‡¤å‡°æ–°é—»çš„ç½‘é¡µå†…ç‚¹å‡»æ‰“å¼€appçš„æ“ä½œå°±ä¼šåˆæ˜¯è·³è½¬åˆ°å‡¤å‡°æ–°é—»appäº†ã€‚
æˆ‘è¿™é‡Œå¹¶æ²¡æŒ‰ç…§å‡¤å‡°æ–°é—»çš„åšæ³•ï¼Œè€Œæ˜¯ç ”ç©¶äº†ä¸€ä¸‹ç½‘æ˜“æ–°é—»åˆ°åº•æ˜¯æ€ä¹ˆç¦æ‰å³ä¸Šè§’çš„openInSafariæŒ‰é’®çš„ã€‚å°±æ˜¯æˆ‘ä¸ç»™ç”¨æˆ·openInSafariçš„é€‰æ‹©ã€‚
ç›´æ¥ä¸Šä»£ç ï¼š
- åœ¨MainTBCç›‘å¬UIApplicationDidBecomeActiveNotification
```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(becomeActive) name:UIApplicationDidBecomeActiveNotification object:nil];
```
- éå†statusbarå­è§†å›¾ï¼Œæ‰¾åˆ°UIStatusBarOpenInSafariItemViewå¹¶ç¦ç”¨å®ƒ
```
 - (void)becomeActive {
    NSLog(@"didBecomeActive");
    UIView *statusBar = [[UIApplication sharedApplication] valueForKey:@"statusBar"];
    NSLog(@"statusBar.subviews = %@", statusBar.subviews);
    //éå†å­è§†å›¾ï¼Œæ‰¾åˆ°å³ä¾§ç”¨Safariæ‰“å¼€è§†å›¾ï¼Œç¦ç”¨å®ƒã€‚
    for (UIView *subView in statusBar.subviews) {
        NSLog(@"subView.subviews = %@", subView.subviews);
        for (UIView *aView in subView.subviews) {
            NSString *aViewClass = NSStringFromClass([aView class]);
            NSLog(@"aViewClass = %@", aViewClass);
            if ([aViewClass isEqualToString:@"UIStatusBarOpenInSafariItemView"]) {
                aView.userInteractionEnabled = NO;
                break;
            }
        }
    }
}
```
å¥½å§ï¼Œç¦ç”¨æ‰äº†å³ä¸Šè§’è¿›å…¥Safariçš„æŒ‰é’®ï¼Œä¸çŸ¥é“è¿™æ ·å¥½ä¸å¥½ï¼Œæˆ‘ä¸€ä¸ªæœ‹å‹è·Ÿæˆ‘è¯´è¿™æ ·ä¸å¥½å§ï¼Œæš‚ä¸”è¿™æ ·å§ï¼Œå…¶å®å¯èƒ½è¿˜æ˜¯æœ‰bugçš„ï¼Œç½‘æ˜“ä¸çŸ¥é“æ˜¯æ€ä¹ˆåšçš„ï¼Œæˆ‘åšçš„åªæ˜¯åœ¨didbecomeactiveé‡Œé¢çš„æ—¶å€™å»éå†statusbarã€‚

## æœ€å
è¿˜æ˜¯æˆ‘å†™åœ¨å¼€å¤´çš„é‚£å¥è¯ **[å®˜æ–¹æ–‡æ¡£ ](https://developer.apple.com/library/content/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1)**
## æœ€åçš„æœ€å
å¦‚æœæœ‰å“ªé‡Œå†™é”™äº†ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œè°¢è°¢ï¼

